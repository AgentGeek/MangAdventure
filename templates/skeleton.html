{% load static %}
{% load custom_tags %}
{% load compile_static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
    <meta name="generator" content="MangAdventure v{{ MANGADV_VERSION }}">
    <meta name="keywords" content="manga, reader, django">
    <meta name="robots" content="index, follow">
    {% if config.DISCORD != 'N/A' %}
      <meta name="discord" content="{{ config.DISCORD }}">
    {% endif %}
    {% if config.TWITTER != 'N/A' %}
      <meta name="twitter:user" content="@{{ config.TWITTER }}">
    {% endif %}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site_name" content="{{ config.NAME }}">
    {% block description %}
      <meta name="twitter:description" content="{{ config.DESCRIPTION }}">
      <meta property="og:description" content="{{ config.DESCRIPTION }}">
    {% endblock %}
    {% block image %}
      {% with url=page_url|default:SITE_URL|urljoin:MEDIA_URL %}
        {% with logo=url|urljoin:config.LOGO_LARGE %}
          <meta name="twitter:image" content="{{ logo }}">
          <meta property="og:image" content="{{ logo }}">
        {% endwith %}
      {% endwith %}
    {% endblock %}
    {% block url %}
      <meta name="url" content="{{ page_url|default:SITE_URL }}">
      <meta property="og:url" content="{{ page_url|default:SITE_URL }}">
    {% endblock %}
    <meta property="og:site_name" content="{{ config.NAME }}">
    {% with favicon=MEDIA_URL|urljoin:config.FAVICON %}
      <link href="{{ favicon }}" rel="shortcut icon"
            type="{{ favicon|get_type }}">
    {% endwith %}
    <link href="{{ page_url|default:SITE_URL|urljoin:'/' }}"
          rel="index" title="{{ config.NAME }}">
    <link href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css"
          integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
          rel="prefetch stylesheet" as="style" crossorigin="anonymous">
    <link href="{{ config.FONT_URL }}" type="text/css"
          rel="prefetch stylesheet" as="style">
    {% block stylesheets %}
      <link href="{% static 'styles/style.scss'|compile %}"
            data-source="{% static 'styles/style.scss' %}"
            rel="stylesheet" type="text/css">
      <link href="{% static 'extra/style.scss'|compile %}"
            data-source="{% static 'extra/style.scss' %}"
            rel="stylesheet" type="text/css">
    {% endblock %}
    <style type="text/css">
      {% inlinecompile 'scss' %}
        @import "functions";
        $main-bg: {{ config.MAIN_BACKGROUND|unquote }};
        $alter-bg: {{ config.ALTER_BACKGROUND|unquote }};
        $main-fg: {{ config.MAIN_TEXT_COLOR|unquote }};
        $alter-fg: {{ config.ALTER_TEXT_COLOR|unquote }};
        $shadow-color: if(lightness($alter-fg) < 50%, #DDD, #444);
        body {
          background-color: $main-bg;
          color: $main-fg;
          font-family: "{{ config.FONT_NAME }}", Helvetica, Arial, sans-serif;
        }
        a { color: $alter-fg }
        #header {
          background-color: $alter-bg;
          a {
            color: $main-fg;
            &:hover, &:active { color: $alter-fg }
          }
        }
        #content {
          background-color: $alter-bg;
          border: 5px solid $alter-bg;
          border-radius: 5px;
          article {
            background-color: $main-bg;
            border-radius: 5px;
          }
        }
        .end::before {
          content: 'END';
          background-color: $alter-bg;
          color: $main-bg;
          display: inline-block;
          border-radius: 3px;
          padding: 0 2px;
        }
        .main-bg { background-color: $main-bg }
        .alter-bg { background-color: $alter-bg }
        h1, h2, .alter-fg { color: $alter-fg }
        h2 { border-color: $alter-fg }
        .text-shadow { text-shadow: shadow(1px, $shadow-color); }
      {% endinlinecompile %}
    </style>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"
            type="text/javascript"></script>
    {% block head_extras %}{% endblock %}
    {% block title %}
      <meta name="twitter:title" content="{{ config.NAME }}">
      <meta property="og:title" content="{{ config.NAME }}">
      <title>{{ config.NAME }}</title>
    {% endblock %}
  </head>
  <body>
    <header id="header">
      <a id="home" href="/">
        <span>
          {% with logo=MEDIA_URL|urljoin:config.LOGO_LARGE %}
            <object class="logo" type="{{ logo|get_type }}"
                    data="{{ logo }}" height="45">
            </object>
          {% endwith %}
          {% with logo=MEDIA_URL|urljoin:config.LOGO_MEDIUM %}
            <object class="logo" type="{{ logo|get_type }}"
                    data="{{ logo }}" height="38">
            </object>
          {% endwith %}
          {% with logo=MEDIA_URL|urljoin:config.LOGO_SMALL %}
            <object class="logo" type="{{ logo|get_type }}"
                    data="{{ logo }}" height="27">
            </object>
          {% endwith %}
        </span>
      </a>
      <nav id="navig">
        <ul>
          {% if config.TWITTER != 'N/A' %}
            <li>
              <a href="https://twitter.com/{{ config.TWITTER }}">
                <i class="fab fa-fw fa-twitter"></i>
                <span class="ident">Twitter</span>
              </a>
            </li>
          {% endif %}
          {% if config.DISCORD != 'N/A' %}
            <li>
              <a href="{{ config.DISCORD }}">
                <i class="fab fa-fw fa-discord"></i>
                <span class="ident">Discord</span>
              </a>
            </li>
          {% endif %}
          <li>
            <a href="/">
              <i class="far fa-fw fa-clock"></i>
              <span class="ident">Latest releases</span>
            </a>
          </li>
          <li>
            <a href="/reader/">
              <i class="far fa-fw fa-list-alt"></i>
              <span class="ident">Series list</span>
            </a>
          </li>
          <li id="searchlink">
            <a href="/search/">
              <i class="fa fa-fw fa-search"></i>
              <span class="ident">Search</span>
            </a>
          </li>
          <li>
            <form action="/search" method="GET" accept-charset="utf-8">
              <input placeholder="Type a series to search for" name="q"
                     type="search" class="main-bg" id="searchbox"/>
            </form>
          </li>
        </ul>
      </nav>
    </header>
    <main id="content">
      {% block content %}
      {% endblock %}
    </main>
    <footer id="footer">
      {% autoescape off %}
        <p class="text">{{ config.FOOTER|linebreaksbr }}</p>
      {% endautoescape %}
    </footer>
  </body>
</html>
